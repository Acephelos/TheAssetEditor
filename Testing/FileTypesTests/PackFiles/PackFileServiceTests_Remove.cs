using FileTypes.PackFiles.Models;
using FileTypes.PackFiles.Services;
using FileTypesTests.Util;
using NUnit.Framework;
using System;
using System.Collections.Generic;
using System.Text;

namespace FileTypesTests.PackFiles
{
    class PackFileServiceTests_Remove
    {
        [Test]
        public void Basic()
        {
            PackFileService packFileService = new PackFileService(new PackFileDataBase());
            var loadedPackFile = packFileService.Load(@"Data\CaPackFile_01.pack");

            Assert.NotNull(loadedPackFile);
            var fileCount = loadedPackFile.FileList.Count;
            Assert.AreEqual(4, fileCount);
        }

        [Test]
        public void DeleteFile()
        {
            PackFileService packFileService = new PackFileService(new PackFileDataBase());
            var loadedPackFile = packFileService.Load(@"Data\CaPackFile_01.pack");
            var file = packFileService.FindFile(@"warmachines\tex\dwf_gyrocopter_obisidan_01_diffuse.dds");

            packFileService.DeleteFile(loadedPackFile, file);

            var fileCount = loadedPackFile.FileList.Count;
            Assert.AreEqual(3, fileCount);
        }

        [Test]
        public void DeleteFolder()
        {
            PackFileService packFileService = new PackFileService(new PackFileDataBase());
            var loadedPackFile = packFileService.Load(@"Data\CaPackFile_01.pack");

            packFileService.DeleteFolder(loadedPackFile, @"warmachines\tex");

            var fileCount = loadedPackFile.FileList.Count;
            Assert.AreEqual(2, fileCount);
        }
    }
}
